# Оптимизация изображений

## Установка Sharp для оптимизации изображений

Для быстрой загрузки изображений товаров установите библиотеку `sharp`:

```bash
cd red
npm install sharp
```

## Что делает оптимизация:

1. **Автоматическое изменение размера** - изображения больше 1200x1200px автоматически уменьшаются
2. **Сжатие** - JPEG сжатие до 85% качества (оптимальный баланс качество/размер)
3. **WebP конвертация** - при загрузке JPEG/PNG автоматически конвертируются в WebP (меньше размер)
4. **Кэширование** - изображения кэшируются в памяти сервера (до 100 изображений)
5. **Кэш headers** - браузер кэширует изображения на 1 год
6. **Оптимизация на лету** - можно запросить изображение нужного размера через параметры `?width=500&quality=80`

## Использование:

### Обычная загрузка:
```
GET /product-image/имя_файла.jpg
```

### С параметрами размера:
```
GET /product-image/имя_файла.jpg?width=500
GET /product-image/имя_файла.jpg?width=500&quality=80
```

## Результат:

- Изображения загружаются в 2-5 раз быстрее
- Размер файлов уменьшается на 40-70%
- Меньше нагрузка на сервер
- Лучший пользовательский опыт

## Примечание:

Если `sharp` не установлен, изображения будут загружаться без оптимизации, но функционал останется рабочим.

